<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Electromagnetism Visualization</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; }
    h1 { margin-top: 20px; }
    #controls { margin: 20px; }
    #canvas { background: #ffffff; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Electric vs Magnetic Fields Visualization</h1>
  <div id="controls">
    <label for="speed">Observer relative speed: </label>
    <input type="range" id="speed" min="0" max="1" step="0.01" value="0.0" style="width: 300px;">
    <span id="speedValue">0.00</span>
  </div>
  <canvas id="canvas" width="800" height="400"></canvas>
  <p>Move the slider to change the observer's relative speed. At low speeds, the electric field is dominant (blue radial lines). As speed increases, the magnetic field (green loops) becomes more pronounced.</p>
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const speedSlider = document.getElementById('speed');
    const speedValue = document.getElementById('speedValue');

    let chargeX = 100;
    let chargeY = canvas.height / 2;
    let direction = 1;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // update charge position
      chargeX += direction * 2;
      if (chargeX > canvas.width - 50 || chargeX < 50) direction *= -1;

      const mix = parseFloat(speedSlider.value);
      speedValue.textContent = mix.toFixed(2);

      // draw electric field lines (blue)
      ctx.strokeStyle = 'rgba(0, 102, 204, ' + (1 - mix) + ')';
      ctx.lineWidth = 1;
      const numLines = 16;
      for (let i = 0; i < numLines; i++) {
        const angle = (Math.PI * 2 / numLines) * i;
        const ex = chargeX + Math.cos(angle) * 30;
        const ey = chargeY + Math.sin(angle) * 30;
        const fx = chargeX + Math.cos(angle) * 100;
        const fy = chargeY + Math.sin(angle) * 100;
        ctx.beginPath();
        ctx.moveTo(ex, ey);
        ctx.lineTo(fx, fy);
        ctx.stroke();
      }

      // draw magnetic field loops (green)
      ctx.strokeStyle = 'rgba(0, 153, 51, ' + mix + ')';
      const numLoops = 4;
      for (let i = 1; i <= numLoops; i++) {
        ctx.beginPath();
        ctx.arc(chargeX, chargeY, 20 + i * 15, 0, Math.PI * 2);
        ctx.stroke();
      }

      // draw charge
      ctx.fillStyle = '#ff6600';
      ctx.beginPath();
      ctx.arc(chargeX, chargeY, 8, 0, Math.PI * 2);
      ctx.fill();

      requestAnimationFrame(draw);
    }

    speedSlider.addEventListener('input', () => {
      // update immediate; speedValue updates in draw
    });

    draw();
  </script>
</body>
</html>
